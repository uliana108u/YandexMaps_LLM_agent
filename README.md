# Assessing Organizations Relevance to Queries on Yandex.Maps using LLM Agent

**üìç –ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∫—É—Ä—Å–∞ NLP —à–∫–æ–ª—ã Deep Learning School**  
**üéØ –¶–µ–ª—å:** –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ LLM-–∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞—Ö —à–∏—Ä–æ–∫–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∑–∞–ø—Ä–æ—Å–∞–º. –ï–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å–∏–ª—å–Ω—ã–º –±–µ–π–∑–ª–∞–π–Ω–æ–º.

---

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–¥—Ö–æ–¥–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–æ–ª—å—à–∏—Ö —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π (LLM) –¥–ª—è –∑–∞–¥–∞—á–∏ **–æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏** –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∑–∞–ø—Ä–æ—Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
LLM-–∞–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏), –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫, –∏ –≤—ã–¥–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: **—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞ –ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å—É**. 

–ò –¥–ª—è –±–µ–π–∑–ª–∞–π–Ω–∞, –∏ –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π –∞–≥–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è LLM: **gpt-4o-mini**. –ú–µ—Ç—Ä–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: **Accuracy**

–ë–µ–π–∑–ª–∞–π–Ω ‚Äî –º–æ–¥–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π few-shot in-context learning –ø—Ä–æ–º—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø–æ–ª—è –∑–∞–ø—Ä–æ—Å–∞, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–¥—Ä–µ—Å, —Ä—É–±—Ä–∏–∫—É –∏ –æ—Ç–∑—ã–≤—ã) –∏ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –∏ –¥–æ–ª–∂–Ω–∞ —Å—Ç—Ä–æ–≥–æ –æ—Ç–≤–µ—Ç–∏—Ç—å: RELEVANT_PLUS –∏–ª–∏ IRRELEVANT.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–∞

–ê–≥–µ–Ω—Ç —É—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ –≥—Ä–∞—Ñ –∏–∑ —Ç—Ä—ë—Ö —É–∑–ª–æ–≤:

* decide_need_search ‚Äî —Ä–µ—à–∞–µ—Ç, –Ω—É–∂–µ–Ω –ª–∏ –ø–æ–∏—Å–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

* search ‚Äî –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–µ–ª–∞–µ—Ç –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Tavily API.

* classify ‚Äî –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞.

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–º—Ç–æ–≤ (–≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Ö 3).

### –í–µ—Ä—Å–∏–∏ –∞–≥–µ–Ω—Ç–∞ –∏ –ø—Ä–æ–º—Ç–æ–≤

üî∏ classify_v1.txt ‚Äî –ê–≥–µ–Ω—Ç V1

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º—Ç–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ –±–µ–π–∑–ª–∞–π–Ω—É.
–ï—Å–ª–∏ –ø–æ–∏—Å–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω, –≤–Ω–µ—à–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ –û—Ç–∑—ã–≤—ã.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –ª–æ–≥–∏–∫—É –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö.

üî∏ classify_v2.txt ‚Äî –ê–≥–µ–Ω—Ç V2

–í–Ω–µ—à–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", –∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ "–û—Ç–∑—ã–≤—ã".
–ü—Ä–æ–º—Ç –¥–æ–ø–æ–ª–Ω–µ–Ω —è–≤–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É. –ü–æ–ø—ã—Ç–∫–∞ —É–ª—É—á—à–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

üî∏ classify_v3.txt ‚Äî –ê–≥–µ–Ω—Ç V3

–¢–æ –∂–µ, —á—Ç–æ –∏ –≤–µ—Ä—Å–∏—è 2, –Ω–æ –Ω–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω –∑–∞–ø—Ä–æ—Å –≤ –ø–æ–∏—Å–∫: –±–µ—Ä–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ + —Ä—É–±—Ä–∏–∫–∞ + –∞–¥—Ä–µ—Å + –∑–∞–ø—Ä–æ—Å. –ò–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ —É–±–∏—Ä–∞—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∏ —Å Missing. 

### –†–µ—à–µ–Ω–∏–µ –æ –ø–æ–∏—Å–∫–µ (need_search)

üî∏need_search_v1.txt

–ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ YES/NO, –±–µ–∑ —á—ë—Ç–∫–∏—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤.

üî∏need_search_v2.txt

–ß—ë—Ç–∫–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–æ, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ–∏—Å–∫, –∞ –∫–æ–≥–¥–∞ –Ω–µ—Ç. –ü—Ä–∏–º–µ—Ä—ã –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è.

üî∏  need_search_v3.txt
–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞. –ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç —ç—Ç–æ –∫–æ–ø–∏—è need_search_v1.txt. –ò –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–≥–µ–Ω—Ç–∞ 3.

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
openai: –¥–ª—è –≤—ã–∑–æ–≤–∞ OpenAI –º–æ–¥–µ–ª–µ–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ)

LangGraph: –∑–∞–¥–∞—ë—Ç –≥—Ä–∞—Ñ –¥–µ–π—Å—Ç–≤–∏–π –∞–≥–µ–Ω—Ç–∞.

Tavily: –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–Ω–µ—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–ø–æ–∏—Å–∫ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ).

---
### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
llm_relevance_agent/
‚îú‚îÄ‚îÄ baseline/                  # –ë–µ–π–∑–ª–∞–π–Ω-–º–æ–¥–µ–ª—å –Ω–∞ GPT –±–µ–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ llm_interface.py       # –û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ OpenAI API (—Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ utils)
‚îÇ   ‚îú‚îÄ‚îÄ prompt_templates.py    # –ü—Ä–æ–º—Ç –¥–ª—è –±–µ–π–∑–ª–∞–π–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ core.py                # –ö–ª–∞—Å—Å RelevanceBaseline
‚îÇ   ‚îî‚îÄ‚îÄ run_baseline.py        # –ó–∞–ø—É—Å–∫ –±–µ–π–∑–ª–∞–π–Ω–∞ 
‚îÇ
‚îú‚îÄ‚îÄ agent/                     # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è LLM-–∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ prompts/               # –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–º—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ agent_graph.py         # –ì—Ä–∞—Ñ –∞–≥–µ–Ω—Ç–∞ –Ω–∞ langgraph
‚îÇ   ‚îú‚îÄ‚îÄ agent_nodes*.py        # –£–∑–ª—ã –≥—Ä–∞—Ñ–∞ (–≤–µ—Ä—Å–∏–∏)
‚îÇ   ‚îú‚îÄ‚îÄ eval_agent.py          # –ú–æ–¥—É–ª—å RelevanceAgentEvaluator –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ promt_loader.py        # –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º—Ç–æ–≤ –ø–æ –≤–µ—Ä—Å–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ search_tools.py        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ (Tavily)
‚îÇ
‚îú‚îÄ‚îÄ data/                      # –î–∞—Ç–∞—Å–µ—Ç—ã 
‚îÇ   ‚îú‚îÄ‚îÄ data_final_for_dls.jsonl   
‚îÇ   ‚îî‚îÄ‚îÄ data_final_for_dls_new.jsonl  # –≤–µ—Ä—Å–∏—è –≤—ã–≤–µ—Ä–µ–Ω–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ 
‚îÇ
‚îú‚îÄ‚îÄ experiments/               # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è, –ª–æ–≥–∏ –∏ –∞–Ω–∞–ª–∏–∑
‚îÇ   ‚îú‚îÄ‚îÄ agent/                 # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ *.csv              # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è 
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent_error_analysis.ipynb  # üëâ –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ –∞–≥–µ–Ω—Ç–∞ –∏ –≤—ã–≤–æ–¥—ã –ø—Ä–æ–µ–∫—Ç–∞ 
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ run_agent_ipynb.ipynb   # –î–ª—è –∑–∞–ø—É—Å–∫–∞ –±–µ–π–∑–ª–∞–π–Ω–∞ –≤ Jupiter Notebook. –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—É—Å–∫–æ–≤. 
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent_logs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analysis_errors/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search_cache_v1/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ search_cache_v3/
‚îÇ   ‚îú‚îÄ‚îÄ baseline_test_predictions.csv  # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –±–µ–π–∑–ª–∞–π–Ω–∞ –Ω–∞ —Ç–µ—Å—Ç–µ
‚îÇ   ‚îú‚îÄ‚îÄ baseline_val_predictions.csv   # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –±–µ–π–∑–ª–∞–π–Ω–∞ –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ run_baseline_pipeline.ipynb  # –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–≥–µ–Ω—Ç–∞ –≤ Jupiter Notebook 
‚îÇ   ‚îî‚îÄ‚îÄ baseline_val_errors_analysis.ipynb
‚îÇ  
‚îÇ
‚îú‚îÄ‚îÄ utils/                     # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py        # –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ 
‚îÇ   ‚îú‚îÄ‚îÄ config.py             # –ü—É—Ç–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ inspector.py          # –î–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä–æ–∫ DataFrame —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è–º–∏ –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ unify_columns.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ pip
‚îú‚îÄ‚îÄ environment.yml            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ conda
‚îú‚îÄ‚îÄ .env                       # –ö–ª—é—á–∏ API –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ main_runner.py             # üëâ –û—Å–Ω–æ–≤–Ω–æ–π –≤—Ö–æ–¥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–≥–µ–Ω—Ç–∞ (–ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞, –ø—Ä–æ–≥–æ–Ω –ø–æ –¥–∞–Ω–Ω—ã–º, –æ—Ü–µ–Ω–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π)
```

---

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**Accuracy –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (299 –ø—Ä–∏–º–µ—Ä–æ–≤):**

* `baseline`: 0.6856
* `agent1`: **0.6957** (+1.01 –ø.–ø.)
* `agent2`: 0.6221
* `agent3`: 0.6388

**Accuracy –Ω–∞ —Ç–µ—Å—Ç–µ (500 –ø—Ä–∏–º–µ—Ä–æ–≤):**

* `baseline`: **0.7840**
* `agent1`: 0.7640
* `agent2`: 0.7360
* `agent3`: 0.7440

### –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫

* **–ö–æ–Ω—Å–µ–Ω—Å—É—Å–Ω—ã–µ –æ—à–∏–±–∫–∏** (–æ—à–∏–±–∫–∏, –≥–¥–µ –≤—Å–µ –º–æ–¥–µ–ª–∏ –æ—à–∏–±–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ):
  * –í–∞–ª–∏–¥–∞—Ü–∏—è: 68 (22.74% –æ—Ç –¥–∞—Ç–∞—Å–µ—Ç–∞)
  * –¢–µ—Å—Ç: 66 (13.2% –æ—Ç –¥–∞—Ç–∞—Å–µ—Ç–∞)
  * –î–æ ~70% –∏–∑ –Ω–∏—Ö –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω—ã —Å –æ—à–∏–±–∫–∞–º–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—á–µ—Å—Ç–≤–æ–º —Ç–∞—Ä–≥–µ—Ç–∞.
    
[–°—Å—ã–ª–∫–∞](https://nbviewer.org/github/ChernayaAnastasia/Assessing_organizations_relevance_to_queries_on_Yandex.Maps_using_LLM_agent/blob/main/experiments/agent/agent_error_analysis.ipynb#) –Ω–∞ —Ç–µ—Ç—Ä–∞–¥–∫—É —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫.
    
### –û–±—â–∏–π –≤—ã–≤–æ–¥

–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –Ω–µ –ø–æ–∫–∞–∑–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏—Ä–æ—Å—Ç–∞ –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è LLM-–∞–≥–µ–Ω—Ç–æ–≤ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –±–µ–π–∑–ª–∞–π–Ω–æ–º.
–ù–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ Agent1 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ, –Ω–æ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π ‚Äî –≤—Å–µ –∞–≥–µ–Ω—Ç—ã —É—Å—Ç—É–ø–∞—é—Ç –±–∞–∑–æ–≤–æ–º—É –ø–æ–¥—Ö–æ–¥—É.

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —ç—Ç–æ:

* –ë—ã–ª–∏ –≤—ã—è–≤–ª–µ–Ω—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∞–≥–µ–Ω—Ç–æ–≤ (–∏ —á–∞—Å—Ç—å –∏–∑ –Ω–∏—Ö –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏, –∞ –æ—à–∏–±–∫–∏ —Ä–∞–∑–º–µ—Ç–∫–∏), –æ—Ç–ª–∏—á–∞—é—â–∏–µ—Å—è –æ—Ç –æ—à–∏–±–æ–∫ –±–µ–π–∑–ª–∞–π–Ω–∞, —á—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –∞–≥–µ–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Å–ø–æ—Å–æ–±–Ω—ã –≤—Å–∫—Ä—ã–≤–∞—Ç—å –ª–∞—Ç–µ–Ω—Ç–Ω—É—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å\–Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, —Ç–æ –µ—Å—Ç—å —Ç–æ—á–Ω–æ –µ—Å—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –±—ã—Ç—å –ª—É—á—à–µ –±–µ–π–∑–ª–∞–π–Ω–∞.

* –ë–æ–ª—å—à–∞—è –¥–æ–ª—è –∫–æ–Ω—Å–µ–Ω—Å—É—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫, —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏, —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ–º –¥–∞–Ω–Ω—ã—Ö (–≤—ã—Å–æ–∫–∏–º –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º —à—É–º–∞ –≤ —Ä–∞–∑–º–µ—Ç–∫–µ).

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ó–∞–≥—Ä—É–∑–∏—Ç—å [–¥–∞–Ω–Ω—ã–µ](https://drive.google.com/file/d/1WADIWzvNcQTA6X4FGYKV6f0m1z0URYhj/view?usp=sharing)

#### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

conda env create -f environment.yml

conda activate llm_relevance

#### –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–π–∑–ª–∞–π–Ω
python baseline/run_baseline.py --batch_size 5 --output_prefix baseline

–∏–ª–∏ —á–µ—Ä–µ–∑ –Ω–æ—É—Ç–±—É–∫:
experiments/run_baseline_pipeline.ipynb

#### –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞
python llm_relevance_agent/main_runner.py --batch_size 5

–∏–ª–∏ —á–µ—Ä–µ–∑ –Ω–æ—É—Ç–±—É–∫:
experiments/agent/run_agent_ipynb.ipynb



